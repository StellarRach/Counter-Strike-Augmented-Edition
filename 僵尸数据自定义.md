**此文档适用于 Build 3200 或更高版本。**

配置文件：
`platform\config\ZombieTable.yaml`

在编辑文件之前，请确保你对 YAML 文件有基本了解，没有的话可以先参考[这里](https://www.runoob.com/w3cnote/yaml-intro.html)。

# 文件结构
```
- gameMode:           # 游戏模式
  parameters:
    - evolveType:     # 僵尸进化等级
      zombieBase:
        - zombieType: # 僵尸类型
          ...
          kickRates:  # 武器击退倍率
            ...
      zombieSkills:   # 僵尸技能数据
        ...
      boomerDeath:    # 腐化暴君自爆数据
        ...
    - evolveType:     # 僵尸进化等级
      ...
- gameMode:           # 游戏模式
  ...
```

# 修改
CSAE 自带的 `ZombieTable.yaml` 已经包含完整数据，建议直接以此为基础修改。

如果配置文件中有数值未定义，会使用 DLL 中自带的数值（与 `ZombieTable.yaml` 的原始数据相同）。

修改后可以在服务端使用 `mp_zbtable_reload 1`。使用后会在下一回合开始时重新加载配置文件。

# 配置项
## gameMode
决定参数适用于哪个模式。

关于模式 ID 请参考 [CSAE 游戏模式列表](https://github.com/StellarRach/Counter-Strike-Augmented-Edition/blob/master/CSAE%20%E6%B8%B8%E6%88%8F%E6%A8%A1%E5%BC%8F%E5%88%97%E8%A1%A8.md)。

自带的配置文件中不包含 "经典生化模式（英雄）"，但你可以使用 `gameMode: 44` 来单独为这个模式自定义数值。如果不存在 `gameMode: 44` 的项，则会使用普通生化模式（英雄）的数值，即 `gameMode: 14`。

## zombieBase
以下是关于僵尸的基础参数。

#### evolveType
决定参数适用于哪种进化等级的僵尸。
| 数值 | 类型 |
| -- | ---- |
| 0 | 次级僵尸 |
| 1 | 母体僵尸 |
| 2 | 领主僵尸 |

#### zombieType
决定参数适用于哪种类型的僵尸。
| 数值 | 僵尸类型 |
| ------ | ------ |
| default | 普通僵尸 |
| speed | 暗影芭比 |
| heavy | 憎恶屠夫 |
| pc | 迷雾鬼影 |
| heal | 巫蛊术尸 |
| deimos | 恶魔之子 |
| deimos2 | 恶魔猎手 |
| undertaker | 送葬者 |
| witch | 嗜血女妖 |
| china | 尸王玄魁 |
| boomer | 腐化暴君 |
| resident | 痛苦女王 |

#### kickRates
决定各种情况下的武器击退倍率。
| 参数名 | 参数应用场景 |
| ------ | ---------- |
| forwardJump | 向前移动并且在空中时 |
| jump | 处于原地并在空中时 |
| stand | 在地面上移动，且没有蹲下时 |
| crazyGravity | 使用技能期间的重力系数 |
| duck | 在地面上蹲下时 |
| velocityModifier | 定身系数 |
| crazyRate | 使用技能期间，应用在击退数值（不包含定身系数）的额外系数 |
| crazyVelocityModifierRate | 使用技能期间，应用在定身系数上的额外系数 |
| crazyVelocityModifierMin | 使用技能期间，定身系数的最小值 |

##### 击退数值的应用逻辑
如果僵尸位于地面上：
  - 如果僵尸蹲下，或者被命中的部位是腿部时，应用 `duck` 倍率；
  - 否则，应用 `stand` 倍率。

如果僵尸位于空中，且僵尸的移动方向与击退方向夹角大于 90°：
  - 如果僵尸具有水平速度（也就是不含 Z 轴的速度），应用 `forwardJump` 倍率；
  - 否则，应用 `jump` 倍率。

如果造成伤害时的场景不属于上述任何一种，则不会造成任何击退。

如果造成伤害时僵尸处于技能状态下，则应用的数值会额外乘以 `crazyRate` 倍率，定身系数会额外乘以 `crazyVelocityModifierRate` 倍率。

`crazyVelocityModifierMin` 确保在使用技能时，任何情况下僵尸的定身系数都不低于该值。


#### 其他参数
| 参数名 | 参数用途 |
| ------ | ---------- |
| maxSpeed | 最大移动速度 |
| gravity | 重力系数 |
| crazyMaxSpeed | 使用技能期间的最大移动速度 |
| crazyGravity | 使用技能期间的重力系数 |
| stunnedMaxSpeed | 被近身武器重击后的最大移动速度 |
| stunnedGravity | 被近身武器重击后的重力系数 |
| crazyDamageRate | 使用技能期间的伤害系数 |
| damageRate | 正常情况下的伤害系数 |
| healRate | 单次自动回血量 |
| health | 未使用，无实际用处 |

## zombieSkills
以下是僵尸的技能参数

| 参数名 | 参数用途 |
| ------ | ---------- |
| minHealth | 能施放技能的最低血量 |
| normalEndTime | 普通僵尸技能的持续时间 |
| normalCoolTime | 普通僵尸技能的冷却时间 |
| speedEndTime | 暗影芭比技能的持续时间 |
| speedCoolTime | 暗影芭比技能的冷却时间 |
| heavyCoolTime | 憎恶屠夫技能的冷却时间 |
| heavyTrapLifeTime | 憎恶屠夫鬼手的消失时间 |
| heavyTrapHoldTime | 憎恶屠夫鬼手控制人类的时间 |
| heavyTrapAlpha | 憎恶屠夫鬼手的不透明度（0 至 255） |
| psycoCoolTime | 迷雾鬼影技能的冷却时间 |
| voodooCoolTime | 巫蛊术尸技能的冷却时间 |
| voodooDistance | 巫蛊术尸为队友回血的最大距离 |
| voodooHealRate | 巫蛊术尸为队友回血的倍率 |
| deimosCoolTime | 恶魔之子技能的冷却时间 |
| deimosFlyVel | 恶魔之子技能发射物的飞行速度 |
| deimosKillTime | 恶魔之子技能发射物的消失时间 |
| deimos2EndTime | 恶魔猎手技能的持续时间 |
| deimos2CoolTime | 恶魔猎手技能的冷却时间 |
| utPileCoolTime | 送葬者技能的冷却时间 |
| utPileLifeTime | 送葬者棺材的消失时间 |
| utPileHP | 送葬者棺材的耐久度 |
| utStompRange | 送葬者棺材为人类减速的范围 |
| utStompSlow | 人类被送葬者棺材减速后的速度值 |
| witchCoolTime | 嗜血女妖诱捕技能的冷却时间 |
| witchBatLifeTime | 嗜血女妖蝙蝠的消失时间 |
| witchBatPullPower | 人类被嗜血女妖蝙蝠拉动的速度 |
| witchConfuseCoolTime | 嗜血女妖迷惑技能的冷却时间（CSAE 暂时没有这个技能） |
| witchConfuseTime | 嗜血女妖迷惑技能的持续时间（CSAE 暂时没有这个技能） |
| chinaEndTime | 尸王玄魁技能的持续时间 |
| chinaCoolTime | 尸王玄魁技能的冷却时间 |
| boomerHealCoolTime | 腐化暴君恢复技能的冷却时间 |
| boomerHealPoint | 腐化暴君恢复技能的加血量 |
| boomerDefendCoolTime | 腐化暴君防护技能的冷却时间 |
| boomerDefendTime | 腐化暴君防护技能的持续时间 |
| boomerDefendSpeedRatio | 腐化暴君防护技能期间的移动速度倍率 |
| boomerDefendKnockbackRatio | 腐化暴君防护技能期间的击退倍率 |
| boomerDefendDamageRatio | 腐化暴君防护技能期间的伤害倍率 |
| boomerDefendNextAttackDelay | 腐化暴君施放防护技能后的再次攻击间隔 |
| residentJumpUpCoolTime | 痛苦女王羽化技能的冷却时间 |
| residentJumpUpRate | 痛苦女王使用羽化技能期间的额外重力系数（基于原有的重力系数） |
| residentJumpUpTime | 痛苦女王羽化技能的持续时间 |
| residentPenetrationCoolTime | 痛苦女王鬼触技能的冷却时间 |
| residentPenetrationDistance | 痛苦女王鬼触技能的攻击距离 |
| residentPenetrationDamage | 痛苦女王鬼触技能的伤害数值 |

## boomerDeath
以下是腐化暴君死亡自爆相关的参数

| 参数名 | 参数用途 |
| ------ | ---------- |
| blowDamage | 自爆的伤害 |
| blowRadius | 自爆的伤害半径 |
| blowKickPowerRatio | 自爆的击退系数（基数为 `150`） |
